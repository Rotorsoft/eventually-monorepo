<div class="row">
  <div class="col-6">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item active">{{rows.length}} Subscriptions</li>
      </ol>
    </nav>
  </div>
  <div class="col-6 d-flex justify-content-end">
    {{#if isAdmin}}
    <a href="/_add" type="button" class="btn btn-primary align-self-center"><i
        class="bi bi-plus"
      ></i>
      Add</a>
    {{/if}}
  </div>
</div>

<table id="subs-table" class="table align-middle sorted-table">
  <thead>
    <tr>
      <th scope="col">Id</th>
      <th scope="col" class="text-end">Position</th>
      <th scope="col" class="text-end">Session</th>
      <th scope="col">Producer</th>
      <th scope="col">Consumer</th>
      <th scope="col">Path</th>
      <th scope="col">Streams</th>
      <th scope="col" class="text-end">Updated</th>
    </tr>
  </thead>
  <tbody>
    {{#each rows}}
      <tr id="row-{{this.id}}" class="{{#unless this.active}}table-secondary{{/unless}}">
        <td id="status-{{this.id}}" scope="row"></td>
        <td class="text-end" id="position-{{this.id}}"></td>
        <td class="text-end" id="session-{{this.id}}"></td>
        <td>
          <a href="/_services/{{this.producer}}">{{this.producer}}</a>
          {{#if this.pll}}
            <a href="{{this.pll}}" target="_blank" rel="noopener noreferrer"><img src="/_public/assets/external-link.svg"
            alt="Logs"
            width="12"
            height="12" /></a>
          {{/if}}
        </td>
        <td>
          <a href="/_services/{{this.consumer}}">{{this.consumer}}</a>
          {{#if this.cll}}
            <a href="{{this.cll}}" target="_blank" rel="noopener noreferrer"><img src="/_public/assets/external-link.svg"
            alt="Logs"
            width="12"
            height="12" /></a>
          {{/if}}
        </td>
        <td>{{this.path}}</td>
        <td>{{this.streams}}</td>
        <td class="text-end">{{dateFormat this.updated}}</td>
      </tr>
    {{/each}}
  </tbody>
</table>

<div id="__state__" hidden>{{{json this.rows}}}</hidden>
<script type="module" src="/_public/js/subscriptions.js"></script>
